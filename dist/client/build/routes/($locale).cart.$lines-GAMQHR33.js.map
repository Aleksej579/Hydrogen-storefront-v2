{
  "version": 3,
  "sources": ["../../../../app/routes/($locale).cart.$lines.jsx"],
  "sourcesContent": ["import {redirect} from '@shopify/remix-oxygen';\n\n/**\n * Automatically creates a new cart based on the URL and redirects straight to checkout.\n * Expected URL structure:\n * ```js\n * /cart/<variant_id>:<quantity>\n *\n * ```\n *\n * More than one `<variant_id>:<quantity>` separated by a comma, can be supplied in the URL, for\n * carts with more than one product variant.\n *\n * @example\n * Example path creating a cart with two product variants, different quantities, and a discount code in the querystring:\n * ```js\n * /cart/41007289663544:1,41007289696312:2?discount=HYDROBOARD\n *\n * ```\n * @param {LoaderFunctionArgs}\n */\nexport async function loader({request, context, params}) {\n  const {cart} = context;\n  const {lines} = params;\n  if (!lines) return redirect('/cart');\n  const linesMap = lines.split(',').map((line) => {\n    const lineDetails = line.split(':');\n    const variantId = lineDetails[0];\n    const quantity = parseInt(lineDetails[1], 10);\n\n    return {\n      merchandiseId: `gid://shopify/ProductVariant/${variantId}`,\n      quantity,\n    };\n  });\n\n  const url = new URL(request.url);\n  const searchParams = new URLSearchParams(url.search);\n\n  const discount = searchParams.get('discount');\n  const discountArray = discount ? [discount] : [];\n\n  // create a cart\n  const result = await cart.create({\n    lines: linesMap,\n    discountCodes: discountArray,\n  });\n\n  const cartResult = result.cart;\n\n  if (result.errors?.length || !cartResult) {\n    throw new Response('Link may be expired. Try checking the URL.', {\n      status: 410,\n    });\n  }\n\n  // Update cart id in cookie\n  const headers = cart.setCartId(cartResult.id);\n\n  // redirect to checkout\n  if (cartResult.checkoutUrl) {\n    return redirect(cartResult.checkoutUrl, {headers});\n  } else {\n    throw new Error('No checkout URL found');\n  }\n}\n\nexport default function Component() {\n  return null;\n}\n\n/** @typedef {import('@shopify/remix-oxygen').LoaderFunctionArgs} LoaderFunctionArgs */\n/** @typedef {import('@shopify/remix-oxygen').SerializeFrom<typeof loader>} LoaderReturnData */\n"],
  "mappings": "yCAmEe,SAARA,GAA6B,CAClC,OAAO,IACT",
  "names": ["Component"]
}
